/*
 Copyright 2014+, Jixun.Org
 WeiChunCai Plugin for WordPress:
   https://github.com/JixunMoe/my-chuncai-wp
*/
jQuery(function(a){var h=window,E=h.jx_wcc,F=h.localStorage;a.fn.clickEx=function(b,e){return a(this).on("click",b,e)};if(F){var V=function(b,a,k,s){k||(k=function(){return!0});var l=a||b,v=l.parentNode,m=function(a){var b=a.offsetParent!=v&&a.offsetParent?m(a.offsetParent):{x:0,y:0};return{x:a.offsetLeft+b.x,y:a.offsetTop+b.y}},f=!1;a=function(a,c,d){(d?document:b).addEventListener(a,c,!1)};var n=0,w=0,r={x:0,y:0},c=function(a){return a&&a.parentNode?l==a?!0:c(a.parentNode):!1},d=function(a){b.style.cursor=
"-webkit-grab";b.style.cursor="grab";f&&a&&s(m(b));f=!1};a("mousedown",function(a){c(a.target)&&k(a)&&(r=m(l),n=a.pageX,w=a.pageY,f=!0,b.style.cursor="-webkit-grabbing",b.style.cursor="grabbing")});a("mouseup",d,!0);a("mousemove",function(a){f&&k(a)&&(l.style.left=r.x+a.pageX-n+"px",l.style.top=r.y+a.pageY-w+"px",a.preventDefault())},!0);d({})},G=function(a){return a[Math.floor(Math.random()*a.length)]},P=function(b){var e=b.c,k,s,l=function(){v();w.stop().fadeOut(600);n.fadeIn();if(-1!==b.wcc_enable.indexOf(e.body))k=
e.body;else{var a;a=b.wcc_enable;if(a.length)a=G(a);else throw Error("\u8bf7\u901a\u77e5\u7ba1\u7406\u5458\u8fdb\u5165\u540e\u53f0\u914d\u7f6e\u6625\u83dc :<");k=a}s=b.wcc[k];q();t(!0)},v=function(){n.hide();clearTimeout(x);clearTimeout(y);w.stop().fadeIn(600)},m=function(){F.jx_wcc_conf=JSON.stringify(e)},f=0,n=a("<div>").appendTo("body").addClass("jx_wcc_main").css({left:e.pos.x,top:e.pos.y}),w=a("<a>").appendTo("body").addClass("jx_wcc_btn_shoukan").text("\u53ec\u5524\u6625\u83dc").hide().click(function(){l();
e.hide=!1;m()}),r=a("<div>").appendTo(n).addClass("jx_wcc_face"),c=0,d=a("<div>").appendTo(n).addClass("jx_wcc_chat"),h=a("<div>").appendTo(d).addClass("jx_wcc_cat_con"),q=function(a){a||(c=0);C.add(I).add(J).add(K).stop().slideUp()},E=[a("<a>").text("\u663e\u793a\u516c\u544a").click(function(){q();c+=5E3;g(b.announcement)}),a("<a>").text("\u5b58\u6d3b\u65f6\u95f4").click(function(){q();c+=5E3;g("\u54b1\u5df2\u7ecf\u548c\u4e3b\u4eba\u5171\u540c\u5ea6\u8fc7\u4e86 "+Math.floor((new Date/1E3-b.since)/
86400)+"\u5929 \u7684\u4eba\u751f\u4e86\u54e6~   \u6211\u662f\u4e0d\u662f\u5f88\u68d2\u5462~")}),a("<a>").text("\u62cd\u6253\u5582\u98df").click(function(){c+=15E3;g("\u8981\u6765\u70b9\u4ec0\u4e48\u5462~");C.slideToggle();J.slideToggle()}),a("<a>").text("\u6362 \u4e00 \u53ea").click(function(){q();g("\u4f60\u60f3\u8981\u54ea\u4e00\u53ea\u5462?");K.slideDown()}),a("<a>").text("\u4f20 \u9001 \u95e8").click(function(){c+=15E3;q();g("\u60f3\u5230\u54ea\u91cc\u53bb\u5462?");I.slideDown()}),a("<a>").text("\u5173\u95ed\u6625\u83dc").click(function(){q();
c=1E4;e.hide=!0;m();g("\u8bb0\u5f97\u518d\u53eb\u6211\u51fa\u6765\u54e6~",function(){setTimeout(function(){a(n).fadeOut(600,function(){v();e.hide=!0;m()})},2E3)})}),a("<a>").text("\u8fd4\u56de").click(function(){z(!0);t()})],u=0,Q=function(){0<u&&u--;setTimeout(Q,42E4)},C=a("<div>").appendTo(d).append(E).addClass("jx_wcc_chat_m").hide(),J=a("<div>").appendTo(d).addClass("jx_wcc_chat_m").hide().clickEx("a",function(){c+=3E3;var H="";9<u?g("\u4e3b\u4eba .. ..  \u6211\u5df2\u7ecf\u5403\u4e0d\u4e0b\u4e86 QwQ"):
(5<u?H="\u5feb\u5403\u4e0d\u4e0b\u4e86\u2026":3>u&&(H="\u591a\u8c22\u4e3b\u4eba~"),u++,g((H+" "+a(this).attr("r")).trim()))}),K=a("<div>").appendTo(d).addClass("jx_wcc_chat_m").hide().clickEx("a",function(){e.body=a(this).attr("m");m();l()}),I=a("<div>").appendTo(d).addClass("jx_wcc_chat_m").hide();a("<div>").appendTo(d).click(function(){C.is(":hidden")?(q(),g("\u9700\u8981\u505a\u70b9\u4ec0\u4e48\u5417?"),c+=15E3,C.slideToggle()):z(!0)}).text("menu").addClass("jx_wcc_ment_btn");var P=a("<img>").appendTo(r).hide(),
L=a("<img>").appendTo(r).hide();new V(r[0],n[0],null,function(a){e.pos=a;m()});var R=!1,S=function(a,b){r.css({width:a.w,height:a.h,backgroundImage:"url("+b+")"})},A={},T=function(a,b){if(A[a]&&A[a].h)b(A[a],a);else{var c=P[0];c.onload=function(){A[a]={w:c.width,h:c.height};b(A[a],a)};c.src=a}},x=0,B=0,g=function(a,b,c){clearTimeout(h.data("jx-jqfx-type"));var d=0,f=a.length,e=function(){h.append("\n"==a[d]?"<br>":a[d]);++d<f?h.data("jx-jqfx-type",setTimeout(e,c||35)):b&&b()};h.text("").data("jx-jqfx-type",
setTimeout(e,1))},U=0,z=function(a){if(a||4E3<new Date-U)q(!0),U=new Date,g(G(b.randTalk))},M=function(a,c){return b.skin+k+a+(c?"."+c:"")+".png"},D=[],N=function(){if(B==D.length)B=0,L.hide(),x=setTimeout(N,1E3*(Math.random()*(f.time[1]-f.time[0])+f.time[0]));else{var a=D[B++];L.attr("src",M(f.base,a[0])).css({left:a[1],top:a[2],position:"absolute"}).show();x=setTimeout(N,1E3*a[3])}},W=function(a){T(M(f.base,0),function(b,c){S(b,c);B=D.length;x=setTimeout(N,1);y=setTimeout(t,O);z(a)})},O=0,y=0,t=
function(a){clearTimeout(y);!a&&c?(y=setTimeout(t,c),c=0):(O=1E3*(Math.random()*((s.time[1]||15)-(s.time[0]||10))+(s.time[0]||10)),f=G(s.faces),R="string"!=typeof f,clearTimeout(x),L.hide(),R?(B=0,D=f.face,W(a)):T(M(f,0),function(a,b){S(a,b);y=setTimeout(t,O);z()}))},p;for(p in b.feedPlay)b.feedPlay.hasOwnProperty(p)&&(d=b.feedPlay[p],J.append(a("<a>").text(p).attr({f:p,r:d})));for(d=b.wcc_enable.length;d--;)K.append(a("<a>").text(b.wcc[b.wcc_enable[d]].name).attr("m",b.wcc_enable[d]));for(p in b.favLink)b.favLink.hasOwnProperty(p)&&
I.append(a("<a>").text(p).attr("href",b.favLink[p]));l();Q();t();e.hide?v():(z(!0),c=3E3,g(b.announcement))};a.ajax({url:E.url,method:"POST",data:{action:"jx_ajax_get_chuncai_opts"},dataType:"json",cache:!0}).success(function(b){P(a.extend({c:a.parseJSON(F.jx_wcc_conf)||{pos:{x:a(h).width()-120,y:a(h).height()-200},hide:768>a(window).height()}},b))})}});
